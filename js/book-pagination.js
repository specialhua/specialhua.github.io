class BookPagination{constructor(){this.currentPage=1;this.itemsPerPage=12;this.allBooks=[];this.filteredBooks=[];this.searchQuery="";this.init()}init(){if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",()=>{this.setupPagination()})}else{this.setupPagination()}}setupPagination(){const e=document.querySelector("#book .content");if(!e)return;this.allBooks=Array.from(e.querySelectorAll("li"));this.filteredBooks=[...this.allBooks];this.createControls();this.showPage(1);this.bindEvents()}createControls(){const e=document.querySelector("#book");if(!e)return;const t=`
            <div class="book-controls">
                <div class="search-container">
                    <input type="text" id="book-search" placeholder="ÊêúÁ¥¢‰π¶ÂêçÊàñ‰ΩúËÄÖ..." class="search-input">
                    <button id="search-btn" class="search-btn">üîç</button>
                </div>
                <div class="book-stats">
                    <span id="book-count">ÂÖ± ${this.allBooks.length} Êú¨‰π¶</span>
                    <span id="page-info">Á¨¨ 1 È°µ</span>
                </div>
            </div>
        `;const s=`
            <div class="book-pagination-container">
                <div class="book-pagination">
                    <button id="prev-btn" class="book-page-btn" disabled>‚Äπ ‰∏ä‰∏ÄÈ°µ</button>
                    <div id="page-numbers" class="book-page-numbers"></div>
                    <button id="next-btn" class="book-page-btn">‰∏ã‰∏ÄÈ°µ ‚Ä∫</button>
                </div>
            </div>
        `;e.insertAdjacentHTML("afterbegin",t);e.insertAdjacentHTML("beforeend",s)}bindEvents(){const e=document.getElementById("book-search");const t=document.getElementById("search-btn");if(e){e.addEventListener("input",e=>{clearTimeout(this.searchTimeout);this.searchTimeout=setTimeout(()=>{this.performSearch(e.target.value)},300)})}if(t){t.addEventListener("click",()=>{this.performSearch(e.value)})}const s=document.getElementById("prev-btn");const o=document.getElementById("next-btn");if(s){s.addEventListener("click",()=>{if(this.currentPage>1){this.showPage(this.currentPage-1)}})}if(o){o.addEventListener("click",()=>{const e=Math.ceil(this.filteredBooks.length/this.itemsPerPage);if(this.currentPage<e){this.showPage(this.currentPage+1)}})}}performSearch(e){this.searchQuery=e.toLowerCase().trim();if(this.searchQuery===""){this.filteredBooks=[...this.allBooks]}else{this.filteredBooks=this.allBooks.filter(e=>{const t=e.querySelector("h3")?.textContent.toLowerCase()||"";const s=e.querySelector("p")?.textContent.toLowerCase()||"";return t.includes(this.searchQuery)||s.includes(this.searchQuery)})}this.currentPage=1;this.showPage(1);this.updateStats()}showPage(e){this.currentPage=e;const t=(e-1)*this.itemsPerPage;const s=t+this.itemsPerPage;this.allBooks.forEach(e=>{e.style.display="none"});this.filteredBooks.slice(t,s).forEach(e=>{e.style.display="block"});this.updatePagination();this.updateStats();this.scrollToTop()}updatePagination(){const t=Math.ceil(this.filteredBooks.length/this.itemsPerPage);const e=document.getElementById("prev-btn");const s=document.getElementById("next-btn");const o=document.getElementById("page-numbers");if(e){e.disabled=this.currentPage<=1}if(s){s.disabled=this.currentPage>=t}if(o){o.innerHTML="";if(t<=7){for(let e=1;e<=t;e++){this.createPageNumber(e,o)}}else{this.createPageNumber(1,o);if(this.currentPage>4){o.insertAdjacentHTML("beforeend",'<span class="book-page-ellipsis">...</span>')}const n=Math.max(2,this.currentPage-2);const i=Math.min(t-1,this.currentPage+2);for(let e=n;e<=i;e++){this.createPageNumber(e,o)}if(this.currentPage<t-3){o.insertAdjacentHTML("beforeend",'<span class="book-page-ellipsis">...</span>')}if(t>1){this.createPageNumber(t,o)}}}}createPageNumber(e,t){const s=document.createElement("button");s.className=`book-page-number ${e===this.currentPage?"active":""}`;s.textContent=e;s.addEventListener("click",()=>{this.showPage(e)});t.appendChild(s)}updateStats(){const e=document.getElementById("book-count");const t=document.getElementById("page-info");const s=Math.ceil(this.filteredBooks.length/this.itemsPerPage);if(e){if(this.searchQuery){e.textContent=`ÊâæÂà∞ ${this.filteredBooks.length} Êú¨‰π¶`}else{e.textContent=`ÂÖ± ${this.allBooks.length} Êú¨‰π¶`}}if(t){if(s===0){t.textContent="Êó†ÁªìÊûú"}else{t.textContent=`Á¨¨ ${this.currentPage} È°µÔºåÂÖ± ${s} È°µ`}}}scrollToTop(){const e=document.querySelector("#book");if(e){e.scrollIntoView({behavior:"smooth",block:"start"})}}}new BookPagination;
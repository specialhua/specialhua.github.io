<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/myfavion.png"><link rel="icon" href="/img/myfavion.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="Specialhua"><meta name="keywords" content="学习,编程,想法"><meta name="description" content="笔记本机器型号是机械革命 15X（还得是鸡哥 &#x3D; &#x3D;），环境 Archlinux。15X的ALSA 枚举到两块编解码器（codec）：一块 HDMI（ATI R6xx HDMI），一块内置声卡 Conexant SN6140。fastfetch信息如下  症状音频出现问题的症状是系统运行一段时间后出现爆音、破音 、噼啪声，严重时这种杂音会非常大，大到多看一眼就要爆炸的地步。 且"><meta property="og:type" content="article"><meta property="og:title" content="机械革命 15x 的 linux 音频爆音 codec检测不到修复——model参数"><meta property="og:url" content="https://inkcodes.com/2025/09/14/%E6%9C%BA%E6%A2%B0%E9%9D%A9%E5%91%BD%2015x%E7%9A%84%20linux%20%E9%9F%B3%E9%A2%91%E7%88%86%E9%9F%B3%20codec%E6%A3%80%E6%B5%8B%E4%B8%8D%E5%88%B0%E4%BF%AE%E5%A4%8D%E2%80%94%E2%80%94model%E5%8F%82%E6%95%B0/"><meta property="og:site_name" content="InkCodes"><meta property="og:description" content="笔记本机器型号是机械革命 15X（还得是鸡哥 &#x3D; &#x3D;），环境 Archlinux。15X的ALSA 枚举到两块编解码器（codec）：一块 HDMI（ATI R6xx HDMI），一块内置声卡 Conexant SN6140。fastfetch信息如下  症状音频出现问题的症状是系统运行一段时间后出现爆音、破音 、噼啪声，严重时这种杂音会非常大，大到多看一眼就要爆炸的地步。 且"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.specialhua.top/hexo_img/wallhaven-4l87zl.webp-pic"><meta property="article:published_time" content="2025-09-14T08:09:56.000Z"><meta property="article:modified_time" content="2025-09-14T08:28:47.000Z"><meta property="article:author" content="Specialhua"><meta property="article:tag" content="archlinux"><meta property="article:tag" content="bug"><meta property="article:tag" content="音频"><meta property="article:tag" content="爆音"><meta property="article:tag" content="破音"><meta property="article:tag" content="codec"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://cdn.specialhua.top/hexo_img/wallhaven-4l87zl.webp-pic"><link rel="preload" as="image" href="https://cdn.specialhua.top/hexo_img/wallhaven-4l87zl.webp-pic" type="image/webp"><title>机械革命 15x 的 linux 音频爆音 codec检测不到修复——model参数 - InkCodes</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/BookStyle.css"><link rel="stylesheet" href="//chinese-fonts-cdn.deno.dev/packages/zqfs/dist/ZhuqueFangsong-Regular/result.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_5025472_l8ff9n2l1pn.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"inkcodes.com",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:40,cursorChar:">_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!0,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><link rel="canonical" href="https://inkcodes.com/2025/09/14/机械革命 15x的 linux 音频爆音 codec检测不到修复——model参数/"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/feed.xml" title="InkCodes" type="application/atom+xml">
</head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><img src="/img/InkCodes-02.png" alt="InkCodes" class="navbar-logo"> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-shouye"></i> <span>首页</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-wendang"></i> <span>闲言</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/" target="_self"><i class="iconfont icon-wendang1"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/" target="_self"><i class="iconfont icon-pingtai"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/" target="_self"><i class="iconfont icon-biaoqian"></i> <span>标签</span></a></div></li><li class="nav-item"><a class="nav-link" href="/talks/" target="_self"><i class="iconfont icon-canyuhuati"></i> <span>碎语</span></a></li><li class="nav-item"><a class="nav-link" href="/books/" target="_self"><i class="iconfont icon-zixun"></i> <span>书单</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-tuandui"></i> <span>友链</span></a></li><li class="nav-item"><a class="nav-link" href="https://www.boyouquan.com/planet-shuttle/" target="_blank"><i class="iconfont icon-faxian"></i> <span>穿梭</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-wode"></i> <span>关于</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://cdn.specialhua.top/hexo_img/wallhaven-4l87zl.webp-pic) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="机械革命 15x 的 linux 音频爆音 codec检测不到修复——model参数"></span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-09-14 16:09" pubdate>2025年9月14日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 2.5k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 7 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">机械革命 15x 的 linux 音频爆音 codec检测不到修复——model参数</h1><p id="updated-time" class="note note-info">本文最后更新于 2025年9月14日 下午</p><div class="markdown-body"><p>笔记本机器型号是<strong>机械革命 15X</strong>（还得是鸡哥 &#x3D; &#x3D;），环境 Archlinux。15X的ALSA 枚举到两块编解码器（<code>codec</code>）：一块 HDMI（<code>ATI R6xx HDMI</code>），一块内置声卡 <strong>Conexant SN6140</strong>。<br>fastfetch信息如下</p><p><img src="https://cdn.specialhua.top/hexo_img/20250915011840959.webp-pic" srcset="/img/loading.gif" lazyload alt="image.png"></p><h2 id="症状"><a href="#症状" class="headerlink" title="症状"></a>症状</h2><p>音频出现问题的症状是系统运行一段时间后出现爆音、破音 、噼啪声，严重时这种杂音会非常大，大到多看一眼就要爆炸的地步。 且偶发开机没有内置扬声器输出，只有三个hdmi输出的情况，<strong>此时直接reboot大概率还是“掉声卡”，只有冷重启，即长按电源数十秒后再开机可能内置扬声器输出又回来了</strong>。没有内置扬声器输总是伴随dmesg日志里有snd_hda_intel 0000:64:00.6: no codecs found!记录（64:00.6是我的设备名，即主要问题是找不到编解码器）。</p><ul><li>这个问题困扰了我很久，包括但不限于的尝试如下：<ul><li>amd-ucode 微码更新</li><li>linux内核的更新，包括zen和lts（6.13+开始）</li><li>安装&#x2F;更新sof-firmware</li><li>snd_hda_intel.single_cmd&#x3D;1：强制控制器以单命令模式工作</li><li>snd_hda_intel.enable_msi&#x3D;0：禁用 MSI 中断</li><li>bios更新至官网目前的最新2025-01</li><li>bios电源切换为性能模式</li><li>snd_hda_intel.dmic_detect&#x3D;0 禁用数字麦克风驱动路径</li></ul></li></ul><h2 id="一些基础信息"><a href="#一些基础信息" class="headerlink" title="一些基础信息"></a>一些基础信息</h2><p>开机识别不到编解码器：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> dmesg | grep -i -E <span class="hljs-string">&quot;(audio|sound|alsa|hda|card)&quot;</span><br></code></pre></td></tr></table></figure></div><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ 5.385940] snd_hda_intel 0000:64:00.1: enabling device (0000 -&gt; 0002) <br>[ 5.386051] snd_hda_intel 0000:64:00.1: Handle vga_switcheroo audio client <br>[ 5.386219] snd_hda_intel 0000:64:00.6: enabling device (0000 -&gt; 0002) <br>[ 5.390353] snd_hda_intel 0000:64:00.6: no codecs found! <br>[ 5.401322] snd_hda_intel 0000:64:00.1: bound 0000:64:00.0 (ops amdgpu_dm_audio_component_bind_ops [amdgpu])<br></code></pre></td></tr></table></figure></div><ul><li><p><code>cat /proc/asound/card*/codec*</code> 能明确看到：</p><ul><li><code>Codec: ATI R6xx HDMI</code>（外接 HDMI 音频）</li><li><code>Codec: Conexant SN6140</code>（内置 HDA 音频）</li></ul></li><li><p><code>sudo dmesg | grep -i &quot;hda.*model\|snd.*model\|codec.*model&quot;</code> 无输出</p></li><li><p><code>cat /sys/class/sound/card*/id</code> 输出 <code>Generic / Generic_1</code></p></li></ul><h2 id="问题定位：爆音原因"><a href="#问题定位：爆音原因" class="headerlink" title="问题定位：爆音原因"></a>问题定位：爆音原因</h2><p>机革15x目前音频还是由HDA（High Definition Audio）驱动，即便安装了sof-firmware，sof也不会接管声卡（猜测机子算比较新的amd?）<br>但HDA在初始化时，需要根据<strong>引脚默认值（pin default）</strong>、机型特性和硬件连线，完成<strong>通路路由（Mixer&#x2F;Widget 连接）</strong>、<strong>功放与 EAPD</strong>、<strong>插拔&#x2F;耳麦检测</strong>等设置。若实际机器与通用策略（generic path）存在偏差，常见后果包括：</p><ul><li>某些引脚的方向&#x2F;用途不匹配（例如麦克风&#x2F;喇叭的路由与硬件设计不一致）；</li><li>放大器、电源门控（power gating）或 EAPD 时序不对，导致“启&#x2F;停电”瞬间产生噪声；</li><li>插孔或内置麦&#x2F;喇叭的检测与自动切换不可靠。</li></ul><p>在这台机器上，直观表现就是<strong>长时间开机运行系统，偶发扬声器突然的爆音、破音</strong>，以及<strong>电源状态切换后不稳定，偶发开机后检测不到内置扬声器输出，codec初始化失败</strong>。结合 <code>codec</code> 枚举结果，可以把怀疑点集中到 <strong>SN6140 的初始化策略</strong> 上。</p><h2 id="关键改动：model-laptop-amic"><a href="#关键改动：model-laptop-amic" class="headerlink" title="关键改动：model=laptop-amic"></a>关键改动：<code>model=laptop-amic</code></h2><p>将 <code>snd-hda-intel</code> 的 <code>model</code> 指定为 <code>laptop-amic</code> 后，问题即刻消失，目前几天时间内复测<br>各种播放视频、音乐均稳定。</p><p>配置：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 配置</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;options snd_hda_intel power_save=0 power_save_controller=N model=laptop-amic probe_mask=1&#x27;</span> | <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> /etc/modprobe.d/alsa-hda.conf<br><br><span class="hljs-comment"># 重启</span><br></code></pre></td></tr></table></figure></div><h3 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h3><ul><li><p><strong><code>power_save</code></strong></p><ul><li>控制 codec 的省电空闲时间（单位秒）。默认值往往是 1 秒，也就是说空闲 1 秒就会把 codec 掉电。</li><li>设置为 <code>0</code> 表示禁用 codec 空闲省电，让它始终保持在工作状态。</li></ul></li><li><p><strong><code>power_save_controller</code></strong></p><ul><li>控制 HDA 控制器本身是否参与省电。</li><li>设置为 <code>N</code> 就是禁止 HDA 控制器进入节能状态。</li></ul></li><li><p><strong><code>model=laptop-amic</code></strong></p><ul><li>指定使用 <strong>笔记本模拟麦克风 (Analog Mic)</strong> 的引脚配置模板。</li><li>修正了 BIOS 提供的错误或不完整的 pin default，确保内置扬声器、耳机孔、内置麦克风正确路由。</li><li>启用必要的 EAPD（功放控制），避免因初始化不当导致的爆音、杂音和自动静音失效。</li></ul></li><li><p><strong><code>probe_mask=1</code></strong></p><ul><li>控制 <code>snd_hda_intel</code> 驱动在初始化时只探测第一个 codec。</li><li>屏蔽掉 GPU 的 HDMI codec，仅保留 Conexant SN6140 作为默认声卡。</li><li>避免 HDMI 与内置声卡竞争默认输出设备，保证系统始终加载并使用正确的那一块声卡。</li></ul></li></ul><h3 id="其他机型的修改参考"><a href="#其他机型的修改参考" class="headerlink" title="其他机型的修改参考"></a>其他机型的修改参考</h3><p>查阅archlinux论坛会发现很多与内置麦克风杂音&#x2F;无声等问题也与codec有关，更通用的一个解决方案是：</p><ol><li>运行下面的命令，检查你机器上的音频 codec：<div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /proc/asound/card*/codec* | grep Codec<br></code></pre></td></tr></table></figure></div></li><li>你可能会看到类似这样的输出（既包含音频也包含视频 codec）：<div class="highlight-wrap" data-rel="Avrasm"><figure class="iseeu highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">Codec:</span> ATI R6xx HDMI<br><span class="hljs-symbol">Codec:</span> Realtek ALC256<br></code></pre></td></tr></table></figure></div></li><li>打开官方内核文档：<br><a target="_blank" rel="noopener" href="https://www.kernel.org/doc/html/latest/sound/hd-audio/models.html">https://www.kernel.org/doc/html/latest/sound/hd-audio/models.html</a></li><li>在文档中找到对应的 codec 版本，并获取它的完整名称。<br>例如，我找到了这一部分：<div class="highlight-wrap" data-rel="Apache"><figure class="iseeu highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ALC22x</span>/<span class="hljs-number">23</span>x/<span class="hljs-number">25</span>x/<span class="hljs-number">269</span>/<span class="hljs-number">27</span>x/<span class="hljs-number">28</span>x/<span class="hljs-number">29</span>x (and vendor-specific ALC3xxx models)<br></code></pre></td></tr></table></figure></div></li><li>在列表中，我选择了 <strong>laptop-amic</strong>。<br>另外，我没有改用更具体的 Realtek ALC256 配置名称，像华硕、联想的品牌机设置可能不适合鸡哥）</li><li>创建或更新 <code>/etc/modprobe.d/alsa-base.conf</code> 文件，并加入以下这一行（把 <code>laptop-amic</code> 替换成与你 codec 匹配的 model 名称）：<div class="highlight-wrap" data-rel="Gams"><figure class="iseeu highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-keyword">options</span> snd-hda-intel <span class="hljs-keyword">model</span>=laptop-amic<br></code></pre></td></tr></table></figure></div></li><li>重启系统。</li></ol><h3 id="为什么-card-id-还是-Generic"><a href="#为什么-card-id-还是-Generic" class="headerlink" title="为什么 card*/id 还是 Generic"></a>为什么 <code>card*/id</code> 还是 <code>Generic</code></h3><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /sys/class/sound/card*/id<br><br>Generic<br>Generic_1<br></code></pre></td></tr></table></figure></div><p><code>/sys/class/sound/card*/id</code> 反映的是<strong>声卡控制器的用户可读名称</strong>，与 <code>model=...</code> 选择的<strong>codec 初始化策略</strong>不是同一层级的对象。前者保持 <code>Generic / Generic_1</code> 完全正常，不影响通过 <code>model</code> 生效特定的引脚&#x2F;路由修复。</p><h2 id="电源管理"><a href="#电源管理" class="headerlink" title="电源管理"></a>电源管理</h2><p>我还在使用TLP，对于TLP的电源管理配置文件，把 <strong>SN6140 所在的 PCI 功能</strong>进行黑名单&#x2F;禁用 Runtime PM，防止未插电开机出现codec检测失效问题</p><div class="highlight-wrap" data-rel="Ini"><figure class="iseeu highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment"># /etc/tlp.conf（片段）</span><br><br><span class="hljs-comment"># 使用完整PCI地址（示例）</span><br><span class="hljs-attr">RUNTIME_PM_BLACKLIST</span>=<span class="hljs-string">&quot;0000:64:00.6&quot;</span><br><br><span class="hljs-comment"># 对该设备强制禁用 Runtime PM（优先级更高）</span><br><span class="hljs-attr">RUNTIME_PM_DISABLE</span>=<span class="hljs-string">&quot;64:00.6&quot;</span><br></code></pre></td></tr></table></figure></div><p>两点说明：</p><ul><li>形如”0000:64:00.6”的地址用 <code>lspci -v | grep -A 10 -B 2 &quot;Audio device&quot;</code> 获取</li><li>如启用了 <code>powertop --auto-tune</code>，可能在会话层面“改写”电源设置，因此用 TLP 的<strong>禁用项</strong>做兜底。</li></ul><h2 id="验证模块参数是否传递成功"><a href="#验证模块参数是否传递成功" class="headerlink" title="验证模块参数是否传递成功"></a>验证模块参数是否传递成功</h2><p>内核模块加载时会把参数挂在 <code>/sys/module/snd_hda_intel/parameters/</code> 下：</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /sys/module/snd_hda_intel/parameters/model <br></code></pre></td></tr></table></figure></div><p>这里应该会显示：(后面null正常)</p><div class="highlight-wrap" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">laptop-amic,(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null)<br></code></pre></td></tr></table></figure></div><h2 id="一些知识，关于引脚配置"><a href="#一些知识，关于引脚配置" class="headerlink" title="一些知识，关于引脚配置"></a>一些知识，关于引脚配置</h2><h3 id="什么是-HDA-Codec-的引脚（Pin）"><a href="#什么是-HDA-Codec-的引脚（Pin）" class="headerlink" title="什么是 HDA Codec 的引脚（Pin）"></a>什么是 HDA Codec 的引脚（Pin）</h3><ul><li><p>在 Intel HDA（High Definition Audio）架构里，声卡芯片（Codec，比如 Realtek ALC256、Conexant SN6140）并不是直接“声卡 &#x3D; 输出&#x2F;输入端口”。</p></li><li><p>芯片内部有很多 <strong>功能节点（nodes）</strong>，其中最关键的是 <strong>Pin Widget</strong>：</p><ul><li>每个 Pin 对应一个物理接口（耳机孔、扬声器、麦克风接口、HDMI 输出等）。</li><li>Pin 有自己的 ID（0x14, 0x15, 0x1a …）。</li><li>Pin 还带有能力描述（wcaps），比如是否支持输入、输出、放大器、检测插拔等。<br>简单理解：<strong>Pin 就是 Codec 芯片内部映射出来的“插孔定义”。</strong></li></ul></li></ul><hr><h3 id="2-引脚配置（Pin-Configuration）"><a href="#2-引脚配置（Pin-Configuration）" class="headerlink" title="2. 引脚配置（Pin Configuration）"></a>2. 引脚配置（Pin Configuration）</h3><ul><li><p>每个 Pin 在出厂时会被 BIOS&#x2F;ACPI 写入一份 <strong>默认配置（default pin config）</strong>。</p></li><li><p>配置内容包括：</p><ul><li><p>这个 Pin 是耳机输出？还是内置扬声器？</p></li><li><p>是否能检测插拔？</p></li><li><p>是否要用作模拟麦克风还是数字麦克风？</p></li><li><p>电源控制方式（EAPD、GPIO）。</p></li></ul></li></ul><p>👉 <strong>作用</strong>：决定了 ALSA 驱动初始化时如何理解你的硬件布局。</p><hr><h3 id="3-为什么会出问题"><a href="#3-为什么会出问题" class="headerlink" title="3. 为什么会出问题"></a>3. 为什么会出问题</h3><ul><li><p>很多笔记本厂商（尤其是国内品牌 &#x2F; 小厂）<strong>BIOS 提供的 Pin 配置写得不规范</strong>：</p><ul><li><p>内置麦克风标成了 dmic（数字），但实际上是模拟 → 麦克风没声。</p></li><li><p>扬声器和耳机 pin 配错 → 插耳机时仍然从扬声器放音。</p></li><li><p>没有正确配置 EAPD → 扬声器音量极低或爆音。</p></li></ul></li><li><p>ALSA 驱动在遇到这些情况时，只能 fallback 到 <strong>Generic</strong>，导致功能残缺。</p></li></ul><hr><h3 id="4-ALSA-的-“model-”-参数怎么用的"><a href="#4-ALSA-的-“model-”-参数怎么用的" class="headerlink" title="4. ALSA 的 “model&#x3D;” 参数怎么用的"></a>4. ALSA 的 “model&#x3D;” 参数怎么用的</h3><ul><li><p>在 <code>snd-hda-intel</code> 驱动里，每个 <code>model=xxx</code> 都对应一份 <strong>预定义的 pin 配置表</strong>（quirk&#x2F;fixup）。</p></li><li><p>比如：</p><ul><li><p><code>laptop-amic</code> → 强制把某些 Pin 配置为“模拟麦克风输入”，修复 BIOS 配错 dmic 的情况。</p></li><li><p><code>alc256-asus-mic</code> → 对 ASUS 某些笔记本专门写死的引脚映射。</p></li><li><p><code>headset-mic</code> → 把一个 combo jack 同时作为耳机和麦克风使用。</p></li></ul></li></ul><p>👉 <strong>原理</strong>：绕过 BIOS 给的垃圾配置，直接套用一份驱动开发者验证过的“更靠谱”的表。</p><hr><h3 id="5-引脚配置在音频中的实际作用"><a href="#5-引脚配置在音频中的实际作用" class="headerlink" title="5. 引脚配置在音频中的实际作用"></a>5. 引脚配置在音频中的实际作用</h3><ul><li><p>决定哪些物理接口可用：耳机孔、麦克风孔、内置扬声器。</p></li><li><p>决定自动切换逻辑：插耳机时是否自动静音扬声器（Auto-Mute）。</p></li><li><p>决定录音效果：是否能区分内置麦克风 vs 外置麦克风。</p></li><li><p>决定音质和稳定性：错误的 pin 配置可能导致爆音、底噪、放大器失效。</p></li></ul><h2 id="后续——依然存在的爆音与解决方案"><a href="#后续——依然存在的爆音与解决方案" class="headerlink" title="后续——依然存在的爆音与解决方案"></a>后续——依然存在的爆音与解决方案</h2><p>时间：2025-09-20<br>情况：早上起来开机发现笔记本的内置扬声器依然发出了啸叫，随后开机运行了一段时间，此期间没有播放音视频等内容，但过了一段时间后突然还是出现了爆音情况，尝试查找archwiki，发现的<a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/PipeWire">pipewire on archwiki</a> 的5.1.13（在播放时有可觉察的音频延迟或是爆裂声）部分提到解决方案。<br>尝试如下：</p><h3 id="创建用户级配置文件"><a href="#创建用户级配置文件" class="headerlink" title="创建用户级配置文件"></a>创建用户级配置文件</h3><p>路径：<br><code>~/.config/wireplumber/wireplumber.conf.d/disable-suspension.conf</code><br>（如不存在自行创建）</p><h3 id="写入配置"><a href="#写入配置" class="headerlink" title="写入配置"></a>写入配置</h3><p>因为我的蓝牙音响输出无问题，我没有配置蓝牙部分，我配置的内容如下：</p><div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs conf">monitor.alsa.rules = [<br>  &#123;<br>    matches = [<br>      &#123;<br>        # Matches all sources<br>        node.name = &quot;~alsa_input.*&quot;<br>      &#125;,<br>      &#123;<br>        # Matches all sinks<br>        node.name = &quot;~alsa_output.*&quot;<br>      &#125;<br>    ]<br>    actions = &#123;<br>      update-props = &#123;<br>        session.suspend-timeout-seconds = 0<br>      &#125;<br>    &#125;<br>  &#125;<br>]<br></code></pre></td></tr></table></figure></div><h3 id="应用配置"><a href="#应用配置" class="headerlink" title="应用配置"></a>应用配置</h3><p><code>systemctl --user restart wireplumber pipewire pipewire-pulse</code></p><p>观察：<code>pw-top</code> 播放内容，并停止相关内容的播放后，回到 Idle(<code>I</code>)，而不是 Suspended(<code>S</code>)。<br>播放时：<br><img src="https://cdn.specialhua.top/hexo_img/20250921120521578.webp-pic" srcset="/img/loading.gif" lazyload alt="image.png"><br>未播放内容时：<br><img src="https://cdn.specialhua.top/hexo_img/20250921120700253.webp-pic" srcset="/img/loading.gif" lazyload alt="image.png"></p><p>注意看ID为34的alsa output节点状态由R变I，而非S。</p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E6%8A%80%E6%9C%AF/" class="category-chain-item">技术</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/archlinux/" class="print-no-link">#archlinux</a> <a href="/tags/bug/" class="print-no-link">#bug</a> <a href="/tags/%E9%9F%B3%E9%A2%91/" class="print-no-link">#音频</a> <a href="/tags/%E7%88%86%E9%9F%B3/" class="print-no-link">#爆音</a> <a href="/tags/%E7%A0%B4%E9%9F%B3/" class="print-no-link">#破音</a> <a href="/tags/codec/" class="print-no-link">#codec</a></div></div><div class="license-box my-3"><div class="license-title"><div>机械革命 15x 的 linux 音频爆音 codec检测不到修复——model参数</div><div>https://inkcodes.com/2025/09/14/机械革命 15x的 linux 音频爆音 codec检测不到修复——model参数/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Specialhua</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2025年9月14日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2025年9月14日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"></article><article class="post-next col-6"><a href="/2025/09/04/hyprland%20end4%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2neovim%E4%B8%BB%E9%A2%98/" title="hyprland end4自动切换neovim主题"><span class="hidden-mobile">hyprland end4自动切换neovim主题</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments"><div id="waline"></div><script type="text/javascript">Fluid.utils.loadComments("#waline",(function(){Fluid.utils.createCssLink("https://registry.npmmirror.com/@waline/client/2.15.8/files/dist/waline.css"),Fluid.utils.createScript("https://registry.npmmirror.com/@waline/client/2.15.8/files/dist/waline.js",(function(){var i=Object.assign({serverURL:"https://xhua.ink",path:"window.location.pathname",meta:["nick","mail","link"],requiredMeta:["nick"],lang:"zh-CN",emoji:["https://cdn.jsdmirror.com/gh/walinejs/emojis/weibo"],dark:'html[data-user-color-scheme="dark"]',wordLimit:0,pageSize:10},{el:"#waline",path:window.location.pathname});Waline.init(i),Fluid.utils.waitElementVisible("#waline .vcontent",()=>{var i="#waline .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)})}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><div style="font-size:.85rem"><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script></div></div><span id="g-post-count-id"></span><div class="beian"><span><a href="https://icp.gov.moe/?keyword=20241997/" target="_blank" rel="nofollow noopener">萌ICP备20241997号</a></span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><script type="text/javascript">const countEl=document.getElementById("g-post-count-id");countEl.innerHTML='共 49237 字被<span class="fade-text">印记</span>'</script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>